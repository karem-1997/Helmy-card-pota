<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Helmy Card - Ø¨ÙˆØªØ§ Ø§Ù„ÙØ§Ø®Ø±</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800;900&display=swap');
        
        :root {
            --primary: #ff1f1f;
            --secondary: #800000;
            --bg: #050505;
            --card-bg: rgba(15, 15, 15, 0.98);
            --accent-red: #ff4757;
            --success: #00ff88;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background: radial-gradient(circle at center, #1a0505 0%, #050505 100%);
            color: #ffffff;
            margin: 0;
            display: flex; align-items: center; justify-content: center;
            min-height: 100vh; padding: 15px;
        }

        .container {
            width: 100%; max-width: 450px;
            background: var(--card-bg); 
            border: 2px solid #2a0000; border-radius: 35px;
            padding: 35px; box-shadow: 0 0 50px rgba(255, 0, 0, 0.15);
        }

        .premium-header {
            text-align: center;
            font-weight: 900;
            font-size: 34px;
            margin-bottom: 10px;
            background: linear-gradient(180deg, #ffffff 0%, #ff1f1f 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 10px rgba(255, 31, 31, 0.4));
        }

        .urgent-note {
            color: var(--accent-red); font-weight: 800; font-size: 15px;
            display: block; text-align: center; margin-bottom: 20px;
            animation: pulse 2s infinite;
        }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.6; } }

        .admin-display {
            background: rgba(255, 0, 0, 0.05); border: 1.5px dashed var(--primary);
            border-radius: 18px; padding: 15px; text-align: center; margin-bottom: 25px;
            cursor: pointer; transition: 0.3s;
        }
        .admin-display:hover { background: rgba(255, 0, 0, 0.1); transform: scale(1.02); }
        .admin-display b { font-size: 32px; display: block; letter-spacing: 3px; color: #fff; text-shadow: 0 0 10px red; }
        .admin-display span { color: #888; font-size: 14px; display: block; margin-top: 5px; }

        label { display: block; margin-bottom: 10px; font-size: 14px; font-weight: 700; color: var(--primary); }
        input, select {
            width: 100%; background: #000;
            border: 1px solid #330000; border-radius: 16px;
            padding: 16px; color: #fff; margin-bottom: 18px; box-sizing: border-box; font-size: 16px;
        }

        .sub-label { display: block; font-size: 11px; color: var(--accent-red); margin-top: -12px; margin-bottom: 18px; font-weight: 600; }

        .result-card { background: rgba(0, 255, 136, 0.05); padding: 20px; border-radius: 20px; text-align: center; margin-bottom: 25px; border: 1px solid rgba(0, 255, 136, 0.2); }
        .result-amount { font-size: 26px; font-weight: 900; color: var(--success); }

        .btn-submit {
            width: 100%; padding: 18px; background: linear-gradient(135deg, #8b0000, #ff0000);
            border: none; border-radius: 18px; color: white; font-size: 19px; font-weight: 900; cursor: pointer; transition: 0.3s;
        }
        .btn-submit:disabled { background: #333; cursor: not-allowed; }

        #successModal {
            display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95);
            z-index: 9999; align-items: center; justify-content: center; padding: 20px; backdrop-filter: blur(15px);
        }
        .modal-card { 
            background: #111; color: #fff; width: 100%; max-width: 400px; 
            padding: 30px; border-radius: 30px; text-align: center; border: 1px solid red;
        }
        .modal-body { background: #000; border-radius: 20px; padding: 20px; margin-top: 15px; }
        .modal-row { display: flex; justify-content: space-between; border-bottom: 1px dashed #333; padding: 12px 0; font-size: 14px; }
        .modal-row:last-child { border-bottom: none; }
        .modal-row b { color: red; }

        .footer { text-align: center; margin-top: 30px; }
        .support-link {
            display: inline-flex; align-items: center; background: #25d366;
            color: #fff; text-decoration: none; padding: 12px 25px; border-radius: 15px; font-weight: 800;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header"><h1 class="premium-header">Helmy Card â€“ Ø¨ÙˆØªØ§</h1></div>
    <span class="urgent-note">ÙŠØ³ØªØºØ±Ù‚ ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ§Ø±Ø¬Øª ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø£Ù…ÙˆØ§Ù„ 24 Ø³Ø§Ø¹Ø©</span>
    
    <div class="admin-display" onclick="copyId('888185')">
        <b id="adminId">888185</b>
        <span>ID Ø³Ø­Ø¨ Ø¨ÙˆØªØ§ ğŸ‘† (Ø§Ø¶ØºØ· Ù„Ù„Ù†Ø³Ø®)</span>
    </div>

    <label>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</label>
    <select id="payment_method" onchange="calculate()">
        <option value="vodafone">ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ (44.50)</option>
        <option value="orange">Ø£ÙˆØ±Ø§Ù†Ø¬ ÙƒØ§Ø´ (44.50)</option>
        <option value="etisalat">Ø§ØªØµØ§Ù„Ø§Øª ÙƒØ§Ø´ (44.50)</option>
        <option value="agent">ÙƒÙˆØ¯ Ø§Ù„ÙˆÙƒÙŠÙ„ Ù Ø§Ù„Ù…Ù†ØµÙ‡ (45.00)</option>
    </select>

    <label>Ù‚ÙŠÙ…Ø© Ø§Ù„Ø³Ø­Ø¨ Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±</label>
    <input type="number" id="usd_input" placeholder="0.00" step="0.01" oninput="calculate()">

    <label>Ø§Ù„Ø£ÙŠØ¯ÙŠ Ø§Ù„ÙŠ Ø³Ø­Ø¨Øª Ù…Ù†Ùˆ</label>
    <input type="text" id="uid_input" placeholder="Ø§Ø¯Ø®Ù„ ID Ø§Ù„Ø£ÙƒÙˆÙ†Øª">

    <label>Ø±Ù‚Ù… Ø§Ù„Ù…Ø­ÙØ¸Ø© / ÙƒÙˆØ¯ Ø§Ù„ÙˆÙƒÙŠÙ„</label>
    <input type="text" id="wallet_input" placeholder="01xxxxxxxxx Ø£Ùˆ Ø§Ù„ÙƒÙˆØ¯">
    <span class="sub-label">Ø§Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø±Ù‚Ù… ØºÙŠØ± 010 ÙŠØªÙ… Ø®ØµÙ… Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.</span>

    <label>Ø§Ø³Ù… Ø§Ù„ÙˆÙƒÙŠÙ„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
    <input type="text" id="agent_name" placeholder="Ø§Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„ÙˆÙƒÙŠÙ„">

    <div class="result-card"><div class="result-amount" id="egp_display">0.00 Ø¬.Ù…</div></div>

    <button class="btn-submit" onclick="processWithdrawal()" id="btnText">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù† ğŸš€</button>

    <div class="footer">
        <a href="https://wa.me/201211511517" class="support-link" target="_blank">ğŸ’¬ Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</a>
    </div>
</div>

<div id="successModal">
    <div class="modal-card">
        <div style="font-size: 50px; color: #00ff88;">âœ…</div>
        <h2 style="margin: 10px 0;">ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­</h2>
        <div class="modal-body" id="invoice-details"></div>
        <button onclick="location.reload()" style="width:100%; padding:15px; background:#ff0000; color:#fff; border:none; border-radius:15px; margin-top:20px; cursor:pointer; font-weight:900;">ØªÙ… Ø§Ù„Ø­ÙØ¸</button>
    </div>
</div>

<script>
    const DB_URLS = [
        "https://sheetdb.io/api/v1/ba4uuazm9ncy3",
        "https://sheetdb.io/api/v1/w00q17tpeju22?sheet=Ø¨ÙˆØªØ§",
        "https://sheetdb.io/api/v1/v8gs5rfhy1oae"
    ];

    function copyId(text) {
        navigator.clipboard.writeText(text).then(() => {
            alert("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù€ ID: " + text);
        });
    }

    function calculate() {
        const method = document.getElementById('payment_method').value;
        const rate = (method === 'agent') ? 45.00 : 44.50;
        const usd = parseFloat(document.getElementById('usd_input').value) || 0;
        const egp = (usd * rate).toFixed(2);
        document.getElementById('egp_display').innerText = egp + " Ø¬.Ù…";
        return { usd, egp, methodText: document.getElementById('payment_method').options[document.getElementById('payment_method').selectedIndex].text };
    }

    async function processWithdrawal() {
        const uid = document.getElementById('uid_input').value.trim();
        const wallet = document.getElementById('wallet_input').value.trim();
        const usdVal = document.getElementById('usd_input').value;
        const agent = document.getElementById('agent_name').value.trim() || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯";
        const btn = document.getElementById('btnText');

        if (!uid || !wallet || !usdVal) { alert("âš ï¸ Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©"); return; }

        btn.disabled = true;
        btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...";

        try {
            const fetchPromises = DB_URLS.map(url => fetch(url).then(res => res.json()));
            const results = await Promise.all(fetchPromises);
            const allRecords = results.flat();

            if (allRecords.some(row => String(row["Ø§Ù„Ø£ÙŠØ¯ÙŠ"]).trim() === uid)) {
                alert("âŒ Ù‡Ø°Ø§ Ø§Ù„Ø£ÙŠØ¯ÙŠ Ù…Ø³Ø¬Ù„ Ù…Ø³Ø¨Ù‚Ø§Ù‹ ÙÙŠ Ø§Ù„Ø³Ø¬Ù„Ø§Øª.");
                btn.disabled = false; btn.innerText = "Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù† ğŸš€";
                return;
            }

            const { usd, egp, methodText } = calculate();
            const timestamp = new Date().toLocaleString('ar-EG');
            
            const payload = { data: [{ "Ø§Ù„Ø£ÙŠØ¯ÙŠ": uid, "Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±": usd + " $", "Ø§Ù„Ù…ØµØ±ÙŠ": egp + " Ø¬.Ù…", "Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙØ¸Ø©": "'" + wallet, "Ø§Ø³Ù… Ø§Ù„ÙˆÙƒÙŠÙ„": agent, "Ø§Ù„ØªØ§Ø±ÙŠØ®": timestamp }] };

            const telegramMsg = `ğŸ“¥ *Ø·Ù„Ø¨ Ø³Ø­Ø¨ Ø¨ÙˆØªØ§ Ø¬Ø¯ÙŠØ¯* ğŸ“¥\n\nğŸ‘¤ *Ø§Ù„Ø£ÙŠØ¯ÙŠ:* \`${uid}\`\nğŸ’µ *Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±:* ${usd} $\nğŸ‡ªğŸ‡¬ *Ø§Ù„Ù…ØµØ±ÙŠ:* ${egp} Ø¬.Ù…\nğŸ“± *Ø§Ù„Ù…Ø­ÙØ¸Ø©:* \`${wallet}\`\nğŸ‘¤ *Ø§Ù„ÙˆÙƒÙŠÙ„:* ${agent}\nâ° *Ø§Ù„ØªÙˆÙ‚ÙŠØª:* ${timestamp}`;

            await Promise.all([
                ...DB_URLS.map(url => fetch(url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) })),
                fetch(`https://api.telegram.org/bot8476254137:AAHmKi2eJCBhAFv_IdE0J312NLAr17LZmQ0/sendMessage`, {
                    method: 'POST', headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ chat_id: "7054064246", text: telegramMsg, parse_mode: 'Markdown' })
                })
            ]);

            document.getElementById('invoice-details').innerHTML = `
                <div class="modal-row"><span>ğŸ‘¤ Ø§Ù„Ø£ÙŠØ¯ÙŠ:</span><b>${uid}</b></div>
                <div class="modal-row"><span>ğŸ’µ Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±:</span><b>${usd} $</b></div>
                <div class="modal-row"><span>ğŸ‡ªğŸ‡¬ Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„Ù…ØµØ±ÙŠ:</span><b>${egp} Ø¬.Ù…</b></div>
                <div class="modal-row"><span>ğŸ“± Ø±Ù‚Ù… Ø§Ù„Ù…Ø­ÙØ¸Ø©:</span><b>${wallet}</b></div>
                <div class="modal-row"><span>â° Ø§Ù„ØªÙˆÙ‚ÙŠØª:</span><b>${timestamp}</b></div>
            `;
            document.getElementById('successModal').style.display = 'flex';

        } catch (e) {
            alert("âŒ ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„");
            btn.disabled = false; btn.innerText = "Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù† ğŸš€";
        }
    }
</script>
</body>
</html>
